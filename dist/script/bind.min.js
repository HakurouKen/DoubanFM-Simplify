window.bindPlayer=function(a){var b=$("#fm-player-container"),c=b.find("a.btn.heart"),d=b.find(".player");c.bind("click",function(){a.heart($(this).toggleClass("hearted").hasClass("hearted")?!0:!1)}),a.bind("play",function(){var b=a.getSongInfo();1==b.like?c.addClass("hearted"):c.removeClass("hearted")}),b.find("a.btn.trash").bind("click",function(){a.trash()}),b.find("a.btn.next").bind("click",function(){a.next()}),b.find("a.btn.prev").bind("click",function(){a.prev()}),b.find(".btn.pause").bind("click",function(b){b.stopPropagation(),$(".player-container").addClass("paused"),a.pause()}),b.delegate(".player-container.paused","click",function(){$(this).removeClass("paused"),a.resume()}),b.find(".volume-wrapper").bind("click",function(b){b.stopPropagation(),b=b?b:window.event;var c=$(this).find(".volume"),d=c.find(".current-volume"),e=(b.clientX-c.offset().left)/c.width();a.vol(100*e),d.css("width",e*c.width()+"px")}),b.find("div.player-wrapper").bind("click",function(b){b=b?b:window.event;var c=(b.clientX-d.offset().left)/d.width();a.jumpTo(100*c+"%")}),b.find(".cover").bind("click",function(){window.open($(this).attr("data-album"))}),b.find(".loop").bind("click",function(){a.loop()?(a.loop(!1),$(this).removeClass("on").addClass("off").text("单曲循环：关")):(a.loop(!0),$(this).removeClass("off").addClass("on").text("单曲循环：开"))}),b.find(".download").bind("click",function(a){a.preventDefault(),chrome.extension.sendMessage({action:"download",url:this.href,name:this.title.replace("下载 : ","")+"."+(this.href.match(/\.\w+$/)||[""])[0].substr(1)},function(){})}),delete window.bindPlayer},window.bindChannel=function(a,b){var c=a.find("ul.channel-list"),d=a.find("ul.channel-list li.channel");c.delegate("li.channel","click",function(){var a,c,e;if(!$(this).hasClass("selected")){var a=d.filter(".selected").data("cid"),c=$(this).data("cid"),e=$(this).parent("ul.channel-list").data("area");b.changeChannel(a,c,e),d.removeClass("selected"),$(this).addClass("selected")}}),d.filter("[data-cid="+(b.getCurChannel()||0)+"]").addClass("selected"),delete window.channelBind};