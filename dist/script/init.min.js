!function(a,b,c){function d(b,d,e){b=b||c("body"),e=e||0;var f,g=Utils.getCookie("ck");return g?c.get(chrome.extension.getURL("template/channel-template.js")).done(function(h){c.when(c.get("/j/fav_channels?ck="+g)).done(function(c){var g,i=Handlebars.compile(h),j={channel_list:[{channels:[{id:"0",name:"我的私人兆赫"},{id:"-3",name:"我的红心兆赫"}],area:"system_chls"},{title:"我的收藏",channels:c.channels,area:"fav_chls"}]};b.append(i(j)),g=b.find(".channel-list-container"),g.height()>b.height()&&b.jscrollbar({width:5,color:"rgb(168,168,168)",opacity:.2,position:"inner",borderRadius:2,mouseScrollDirection:"vertical"}),a.channel=f=Channel(g,d,e),bindChannel(g,f,d,e)})}):void 0}function e(b){return b=b||c("body"),c.get(chrome.extension.getURL("template/player-template.js")).done(function(d){b.append(d),a.player=Player("#fm-player-container"),bindPlayer(player),c.get("/j/change_channel?fcid=undefined&tcid="+(c("#fm-html5 ul.channel-list li.channel.selected").data("cid")||0)+"&area=songchannel").done(function(){player.getNextSongList("n",function(a){player.initSong(a.song[0]),a.song[0].like&&c("#fm-player-container a.btn.heart").addClass("hearted")})})})}function f(a){a?(g.fadeOut(1e3,function(){c(".fm-player a.btn.pause").click(),l.fadeIn(1e3)}),i.html(j)):(l.fadeOut(1e3,function(){c(".player-container.paused").click(),g.fadeIn(1e3),g.find("li[data-cid="+(channel.getCurChannel()||0)+"]").addClass("selected")}),i.html(""))}{var g,h=c("body"),i=c("#radioplayer"),j=i.clone().wrap("<div></div>").parent().html(),k=c("body").contents();c("#fm-player-container")}k.wrapAll('<div id="origin"></div>');var l=c("#origin").fadeOut(1e3);i.html(""),c.get(chrome.extension.getURL("template/frame-template.js")).done(function(a){h.append(a),g=c("#fm-html5").css("display","none"),e(g.find(".fm-bar")).done(function(){d(g.find(".channel-bar"),player).done(function(){g.fadeIn(1e3)})})}),c.get(chrome.extension.getURL("template/button-template.js")).done(function(a){h.append(a),c("#toggleView").toggle(function(){f(!0)},function(){f(!1)})})}(window,document,jQuery);