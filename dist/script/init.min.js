!function(a,b,c){function d(b,d,e){b=b||c("body"),e=e||0;var f,g=Utils.getCookie("ck");return g?c.get(chrome.extension.getURL("template/channel-template.js")).done(function(h){c.when(c.get("/j/fav_channels?ck="+g)).done(function(c){var g,i=Handlebars.compile(h),j={channel_list:[{channels:[{id:"0",name:"我的私人兆赫"},{id:"-3",name:"我的红心兆赫"}],area:"system_chls"},{title:"我的收藏",channels:c.channels,area:"fav_chls"}]};b.append(i(j)),g=b.find(".channel-list-container"),g.height()>b.height()&&b.jscrollbar({width:5,color:"rgb(168,168,168)",opacity:.2,position:"inner",borderRadius:2,mouseScrollDirection:"vertical"}),a.channel=f=Channel(g,d,e),bindChannel(g,f,d,e)})}):void 0}function e(b){return b=b||c("body"),c.get(chrome.extension.getURL("template/player-template.js")).done(function(d){b.append(d),a.player=Player("#fm-player-container"),bindPlayer(player),c.get("/j/change_channel?fcid=undefined&tcid="+(c("#fm-html5 ul.channel-list li.channel.selected").data("cid")||0)+"&area=songchannel").done(function(){player.getNextSongList("n",function(a){player.initSong(a.song[0]),a.song[0].like&&c("#fm-player-container a.btn.heart").addClass("hearted")})})})}function f(){return n.wrapAll('<div id="origin"></div>'),k=c("#origin").fadeOut(1e3,function(){isOrginal=!1}),m.html(""),c.get(chrome.extension.getURL("template/frame-template.js")).done(function(a){l.append(a),j=c("#fm-html5").css("display","none")})}function g(){return c.get(chrome.extension.getURL("template/button-template.js")).done(function(a){l.append(a),bindToggleBtn("#toggleView",j,k,m)})}function h(a){return a=a||c("body"),c.get(chrome.extension.getURL("template/lyric-template.js")).done(function(b){a.append(b);var c=j.find("#fm-player-container"),d=a.height()-c.height()-parseInt(c.css("margin-top"))-parseInt(c.css("margin-bottom")),e=j.find(".lyric-container");e.height(d-30),e.find(".lyric-wrapper").height(d-30-50)})}function i(){f().then(function(){e(j.find(".fm-bar")).done(function(){bindHotkey("#fm-player-container",player),j.fadeIn(1e3),g(),d(j.find(".channel-bar"),player).done(function(){}),h(j.find(".fm-bar"),player).done(function(){a.lyric=Lyric(player,j.find(".lyric-container")),bindLyric(lyric,j,j.find(".lyric-container"))})})})}var j,k,l=c("body"),m=c("#radioplayer"),n=c("body").contents();a.isOrginal,i()}(window,document,jQuery);